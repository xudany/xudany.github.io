---
title: jest单元测试
date: 2019-11-27
categories:
- jest
tags:
- jest
- unit
- Learning
---







1. Option "mapCoverage" has been removed, as it's no longer necessary.

详细信息：

```bash
 Option "mapCoverage" has been removed, as it's no longer necessary.
 Please update your configuration.
 Configuration Documentation:
 https://facebook.github.io/jest/docs/configuration.html
```
解决方法：
在配置文件jest.conf.js中删除`mapCoverage`




2. SecurityError: localStorage is not available for opaque origins

详细信息：

```bash
SecurityError: localStorage is not available for opaque origins
at Window.get localStorage [as localStorage] (node_modules/jsdom/lib/jsdom/browser/Window.js:257:15)
at Array.forEach (<anonymous>)
```
解决方法：

修改 jest.conf.js 文件添加一行`testURL`

```javascript
const path = require('path')

module.exports = {
  rootDir: path.resolve(__dirname, '../../'),
  moduleFileExtensions: [
    'js',
    'json',
    'vue'
  ],
  moduleNameMapper: {
    '^@/(.*)$': '<rootDir>/src/$1'
  },
  transform: {
    '^.+\\.js$': '<rootDir>/node_modules/babel-jest',
    '.*\\.(vue)$': '<rootDir>/node_modules/vue-jest'
  },
  testPathIgnorePatterns: [
    '<rootDir>/test/e2e'
  ],
  snapshotSerializers: ['<rootDir>/node_modules/jest-serializer-vue'],
  setupFiles: ['<rootDir>/test/unit/setup'],
  coverageDirectory: '<rootDir>/test/unit/coverage',
  collectCoverageFrom: [
    'src/**/*.{js,vue}',
    '!src/main.js',
    '!src/router/index.js',
    '!**/node_modules/**'
  ],
	'testURL': 'http://localhost'
}
```



参考资料：

https://blog.csdn.net/yj1499945/article/details/88988628



Test suite failed to run

 [Uncaught TypeError: Cannot read property 'getters' of undefined](https://www.cnblogs.com/ccgyyn/p/10544965.html)